(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{9203:function(e,t,s){Promise.resolve().then(s.bind(s,1349))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var r=s(2972),n=s.n(r)},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},1349:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),n=s(2265),a=s(9376),l=s(7648);function o(e){let{unlocked:t,releaseOrder:s}=e;return t?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})}),"해금됨"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s?"#".concat(s):"잠김"]})}function i(e){let{content:t}=e;return(0,r.jsxs)(l.default,{href:t.unlocked?"/contents/".concat(t.id):"#",className:"group block rounded-xl overflow-hidden border border-gray-200 bg-white transition-all ".concat(t.unlocked?"hover:shadow-lg hover:border-orange-300 cursor-pointer":"opacity-60 cursor-not-allowed"),children:[(0,r.jsxs)("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden",children:[t.thumbnail_url?(0,r.jsx)("img",{src:t.thumbnail_url,alt:t.title,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),!t.unlocked&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,r.jsx)("div",{className:"absolute top-3 left-3",children:(0,r.jsxs)("span",{className:"bg-black/50 text-white text-xs px-2 py-1 rounded",children:["#",t.release_order]})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-orange-600 transition-colors line-clamp-1",children:t.title}),(0,r.jsx)(o,{unlocked:t.unlocked,releaseOrder:t.release_order})]}),t.description&&(0,r.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description}),t.category&&(0,r.jsx)("span",{className:"inline-block mt-2 text-xs bg-orange-50 text-orange-600 px-2 py-0.5 rounded",children:t.category})]})]})}function c(e){let{contents:t}=e;return 0===t.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,r.jsx)("p",{className:"text-gray-500",children:"아직 등록된 콘텐츠가 없습니다."})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsx)(i,{content:e},e.id))})}function d(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[o,i]=(0,n.useState)("all"),[d,x]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),h=(0,a.useRouter)();(0,n.useEffect)(()=>{fetch("/api/contents").then(async e=>{if(401===e.status){h.push("/login");return}let s=await e.json();t(s.contents||[]),x(s.subscription),m(s.unlockInfo)}).catch(console.error).finally(()=>l(!1))},[h]);let g=Array.from(new Set(e.map(e=>e.category).filter(Boolean))),p=e.filter(e=>"unlocked"===o?e.unlocked:"locked"!==o||!e.unlocked),f=e.filter(e=>e.unlocked).length,j=e.filter(e=>!e.unlocked).length;return s?(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-20 text-center",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-500",children:"콘텐츠를 불러오는 중..."})]}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"콘텐츠 라이브러리"}),(0,r.jsx)("p",{className:"text-gray-500",children:d?"구독 기간에 따라 순차적으로 해금됩니다":"구독을 시작하면 콘텐츠가 순차적으로 해금됩니다"})]}),!d&&(0,r.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5 mb-8 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"아직 구독 중이 아닙니다"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"구독을 시작하고 프리미엄 콘텐츠를 이용하세요"})]}),(0,r.jsx)("a",{href:"/pricing",className:"px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors",children:"구독 시작"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-8",children:[[{key:"all",label:"전체"},{key:"unlocked",label:"해금됨"},{key:"locked",label:"잠김"}].map(e=>{let{key:t,label:s}=e;return(0,r.jsx)("button",{onClick:()=>i(t),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(o===t?"bg-orange-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:s},t)}),g.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-6 w-px bg-gray-200 mx-1"}),g.map(e=>(0,r.jsx)("span",{className:"px-3 py-1.5 bg-gray-50 text-gray-500 rounded-lg text-sm",children:e},e))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:f}),(0,r.jsx)("div",{className:"text-sm text-green-600",children:"해금됨"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-400",children:j}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"잠김"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-xl p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500",children:e.length}),(0,r.jsx)("div",{className:"text-sm text-orange-500",children:"전체"})]})]}),(null==u?void 0:u.nextUnlockDate)&&(0,r.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 mb-8 text-sm text-blue-700",children:["⏰ 다음 해금일: ",new Date(u.nextUnlockDate).toLocaleDateString("ko-KR")]}),(0,r.jsx)(c,{contents:p})]})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9203)}),_N_E=e.O()}]);